#!/bin/bash
case "$1" in
	"")
echo "Script usage:"
echo "-c|--create       	- creating new instace "
echo "-d|--destroy      	- destroying instance"
;;
    --create|-c)


if [ -z "${12}" ]
  then
terraform apply -auto-approve -state-out="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -var='network_name='"$7" -var='ssh_key_file='"$8" -var='ssh_private_key='"$9" -var='routerip='"${10}" ./"${11}"/
else
terraform apply -auto-approve -state-out="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -var='network_name='"$7" -var='ssh_key_file='"$8" -var='ssh_private_key='"$9" -var='routerip='"${10}" -var='branch='"${12}" ./"${11}"/
fi
;;
    --destroy|-d)
./terraform destroy -auto-approve -state="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -target openstack_compute_instance_v2.basic ./${7}/
./terraform destroy -auto-approve -state="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -target openstack_compute_keypair_v2.KeyPair ./${7}/
./terraform destroy -auto-approve -state="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -target openstack_compute_secgroup_v2.contrail_security_group ./${7}/
./terraform destroy -auto-approve -state="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -target openstack_blockstorage_volume_v2.volume ./${7}/
./terraform destroy -auto-approve -state="$2" -var='user_name='"$2" -var='password='"$3" -var='project_id='"$4" -var='domain_name='"$5" -var='project_name='"$6" -target openstack_compute_floatingip_associate_v2.floatip_1 ./${7}/
;;
    *)
;;
esac
